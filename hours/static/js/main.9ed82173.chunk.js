(this.webpackJsonphourbyhour=this.webpackJsonphourbyhour||[]).push([[0],{44:function(e,a,t){e.exports=t(87)},49:function(e,a,t){},85:function(e,a,t){e.exports=t.p+"static/media/mainError.9731a3a1.jpg"},87:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(10),c=t.n(l),o=(t(49),t(11)),m=t(32),s=t(33),i=t(34),u=t(41),d=t(35),E=t(40),h=t(92),g=t(13),p=t(93),f=t(94),y=t(95),v=t(96),b=t(97),k=t(98),w=t(106),N=t(99),x=t(100),S=t(101),D=t(102),j=t(103),C=t(104),O=t(105),F=t(39);var Y=t(36),K=t.n(Y);function W(){return K.a.create({baseURL:"https://young-ocean-18509.herokuapp.com/api/v1",headers:{"Access-Control-Allow-Headers":"*"}})}var B=t(17),A=t.n(B),M=t(15),P=t(7);function T(e){var a=1;return"-"===e[0]&&(a=-1,e=e.substr(1)),function(t,n){return(t[e]<n[e]?-1:t[e]>n[e]?1:0)*a}}var V=["#d32f2f","#9e9e9e","#B0BEC5","#00bcd4","#009688","#ff9800","#C8E6C9"],J=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(u.a)(this,Object(d.a)(a).call(this,e))).getDataFromDb=function(){W().get("getStamps").then((function(e){return e.data.stamps})).catch((function(e){return e})).then((function(e){t.setState({mainError:!1,loading:!1,stamps:e.sort(T("day"))})})).catch((function(e){console.log(e,"22"),t.setState({loading:!0,mainError:!0})}))},t.state={modal:!1,loading:!0,errorDay:!1,stamps:[],newStamp:{day:A()().format("YYYY-MM-DD"),exit:void 0,dayOfWeek:void 0,comeback:void 0}},t}return Object(E.a)(a,e),Object(i.a)(a,[{key:"modalToggle",value:function(){this.setState({modal:!this.state.modal,errorDay:!1,mainError:!1,putError:!1,newStamp:{day:A()().format("YYYY-MM-DD"),exit:void 0,dayOfWeek:void 0,comeback:void 0}})}},{key:"changePeriod",value:function(e,a){var t=this,n=this.state.stamps,r=e.target.value;this.setState({errorDay:!1}),"day"===a&&n.map((function(e){e.day===r&&t.setState({errorDay:!0})})),this.setState({newStamp:Object(m.a)({},this.state.newStamp,Object(o.a)({},a,r))})}},{key:"trySave",value:function(){var e=this;this.setState({loading:!0,putError:!1});var a,t=this.state.newStamp;(a=t,W().post("putStamp",a).then((function(e){return e.data.success})).catch((function(e){return e}))).then((function(a){a?(console.log("success"),e.setState({putError:!1}),e.getDataFromDb(),e.modalToggle()):(console.log("something wron with putting"),e.setState({putError:!0}))})).catch((function(e){console.log(e,"put error")}))}},{key:"componentDidMount",value:function(){this.getDataFromDb()}},{key:"tryAgain",value:function(){this.setState({mainError:!1,loading:!0}),this.getDataFromDb()}},{key:"render",value:function(){var e=this,a=0,n=0,l="-",c="-",o="-",m=void 0,s=this.state,i=s.newStamp,u=s.modal,d=s.putError,E=s.errorDay,Y=s.mainError,K=s.loading,W=s.stamps;if(W.length>0){W.map((function(e){a+=e.hours,n+=e.treatment}));var B=W.sort(T("-treatment")),A=W.sort(T("-hours")),J=W.sort(T("-comeback"));c=A[0],l=B[0],o=J[0],m=function(e){var a=[];e.filter((function(e){a.push(e.dayOfWeek)})),a=new Set(a),a=Object(F.a)(a);var t=[];return a.forEach((function(a){var n=[],r=0;e.map((function(e){e.dayOfWeek===a&&(r+=e.treatment,n.push(e.treatment))}));var l={};l.name=a,l.avg=r/n.length,t.push(l)})),t}(W)}return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{color:"light",className:"text-muted"},r.a.createElement(g.a,{in:!K},r.a.createElement(p.a,{disabled:!!Y,color:"info",onClick:function(){return e.modalToggle()}},r.a.createElement(M.b,null))),r.a.createElement(p.a,null,r.a.createElement(M.a,null))),Y?r.a.createElement("div",{className:"error"},r.a.createElement("img",{src:t(85),alt:"error db =("}),r.a.createElement(p.a,{onClick:function(){return e.tryAgain()},color:"success"},"try again?")):r.a.createElement(f.a,{fluid:!0,className:"pt-md-4"},r.a.createElement(y.a,null,r.a.createElement(v.a,{className:"col-12 my-2"},r.a.createElement(b.a,{className:"p-2 bg-light text-muted d-flex justify-content-center align-items-center"},K?r.a.createElement(k.a,null):0!==W.length?r.a.createElement("div",{className:"wrap"},r.a.createElement("div",{className:"wrap-card"},r.a.createElement("h1",null,a.toFixed(1)),r.a.createElement("span",null,"total hours")),r.a.createElement("div",{className:"wrap-card"},r.a.createElement("h1",null,n.toFixed(1)),r.a.createElement("span",null,"total treatments")),r.a.createElement("div",{className:"wrap-card"},r.a.createElement("h1",null,(a/W.length).toFixed(2)),r.a.createElement("span",null,"average hours per day")),r.a.createElement("div",{className:"wrap-card"},r.a.createElement("h1",null,(n/W.length).toFixed(2)),r.a.createElement("span",null,"average treatments per day"))):r.a.createElement("div",{className:"wrap"},"no data... yet")))),r.a.createElement(y.a,{className:"my-2"},r.a.createElement(v.a,null,r.a.createElement(b.a,{className:"p-2 bg-light text-muted d-flex justify-content-center align-items-center"},K?r.a.createElement(k.a,null):0!==W.length?r.a.createElement(P.e,{height:310,data:W.sort(T("day")).slice(-15)},r.a.createElement(P.h,{dataKey:"day"}),r.a.createElement(P.i,null),r.a.createElement(P.d,{dataKey:"minutes",options:{fillStyle:"solid",fill:"#e91e63"}}),r.a.createElement(P.f,{dataKey:"minutes",options:{stroke:"#ffeb3b",strokeWidth:3}}),r.a.createElement(P.g,null)):"no data"))),r.a.createElement(y.a,null,r.a.createElement(v.a,{className:"col-12 my-2"},r.a.createElement(b.a,{className:"p-2 bg-light text-muted d-flex justify-content-center align-items-center"},K?r.a.createElement(k.a,null):0!==W.length?r.a.createElement("div",{className:"wrap"},r.a.createElement("div",{className:"wrap-card"},r.a.createElement("h1",null,l.day),r.a.createElement("span",null,"most treatment (",l.treatment,")")),r.a.createElement("div",{className:"wrap-card"},r.a.createElement("h1",null,c.day),r.a.createElement("span",null,"most hours (",c.hours,")")),r.a.createElement("div",{className:"wrap-card"},r.a.createElement("h1",null,o.day),r.a.createElement("span",null,"most comeback (",c.comeback,")"))):r.a.createElement("div",{className:"wrap"},"no data... yet")))),r.a.createElement(y.a,{className:"my-2"},r.a.createElement(v.a,null,r.a.createElement(b.a,{className:"p-2 bg-light text-muted d-flex justify-content-center align-items-center"},K?r.a.createElement(k.a,null):0!==W.length?r.a.createElement(P.e,{height:300,data:W.sort(T("day")).slice(-15)},r.a.createElement(P.c,{dataKey:"hours",options:{stroke:"#B0BEC5"}}),r.a.createElement(P.c,{dataKey:"treatment",options:{stroke:"#d32f2f"}}),r.a.createElement(P.i,null),r.a.createElement(P.h,{dataKey:"day"}),r.a.createElement(P.g,null)):"no data"))),r.a.createElement(y.a,{className:"my-2"},r.a.createElement(v.a,null,r.a.createElement(b.a,{className:"p-2 bg-light text-muted d-flex justify-content-center align-items-center"},K?r.a.createElement(k.a,null):0!==W.length?r.a.createElement(P.e,{height:300,data:m},r.a.createElement(P.b,{dataKey:"avg"},(function(e,a,t){return r.a.createElement(P.a,Object.assign({},a,{key:t,options:{fill:V[t]}}))})),r.a.createElement(P.g,null,(function(e){var a=e.name,t=e.avg;return"".concat(a," average treatment: ").concat(t)}))):"no data"))),r.a.createElement(w.a,{isOpen:u,toggle:function(){return e.modalToggle()}},r.a.createElement(N.a,{className:"text-white bg-dark"},"Add new stamp"),r.a.createElement(x.a,{className:"text-white bg-dark"},d?r.a.createElement("div",{className:"errorPut"},"some problems with putting new stamp",r.a.createElement(p.a,{onClick:function(){return e.trySave()}},"try again?")):r.a.createElement(S.a,null,r.a.createElement(D.a,null,r.a.createElement(y.a,null,r.a.createElement(v.a,{className:"col-12 mb-2"},r.a.createElement(j.a,{for:"day"},"day"),r.a.createElement(C.a,{className:"text-center",defaultValue:i.day,onChange:function(a){return e.changePeriod(a,"day")},type:"date",name:"day",id:"day"})),r.a.createElement(v.a,{className:"col-12"},r.a.createElement(j.a,{for:"exit"},"exit"),r.a.createElement(C.a,{defaultValue:i.exit,className:"text-center",onChange:function(a){return e.changePeriod(a,"exit")},type:"time",name:"exit",id:"exit"})))),r.a.createElement(D.a,null,r.a.createElement(j.a,{for:"comeback"},"comeback"),r.a.createElement(C.a,{className:"text-center",defaultValue:i.comeback,onChange:function(a){return e.changePeriod(a,"comeback")},type:"time",name:"comeback",id:"comeback"})))),r.a.createElement(O.a,{className:"text-white bg-dark"},r.a.createElement(g.a,{in:E},r.a.createElement("span",null,"this stamp already exist ")," "),r.a.createElement(g.a,{in:!E},r.a.createElement(p.a,{onClick:function(){return e.trySave()},disabled:void 0===i.comeback||void 0===i.exit,className:"btn-success"},r.a.createElement(M.c,null))),r.a.createElement(p.a,{color:"secondary",onClick:function(){return e.modalToggle()}},"Cancel")))))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(86);c.a.render(r.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[44,1,2]]]);
//# sourceMappingURL=main.9ed82173.chunk.js.map