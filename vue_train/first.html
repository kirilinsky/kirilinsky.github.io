<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>First</title>
	<link rel="stylesheet" href="boot.css">
	<style>
		.el {
			margin:51px;
			border: 2px solid lightgrey;
			box-shadow: 1px 1px 2px grey;
			border-radius: 5px;
			width: 60%;
			min-height: 399px;
			display: flex;
			justify-content: space-around;
			flex-flow: column nowrap;
			align-items: center;
		}
		label{
			padding: 3px;
		}
		.guestsAdd{
			margin:5px;
		}
		span.alert {
			margin:15px 0;
		}
		.badge:hover {
			cursor: pointer;
			box-shadow: 0 0 3px red;
		}
		form{
			width: 290px;
		}
	</style>
</head>
<body>
	<div class="el">
		<form class="form-group" v-if="!allDone">
			<label for="mail">Your E-mail</label>
			<input type="email" class="form-control" v-model="email">
			<label for="name">Your name</label><br>
			<input class="form-control" type="text" id="name" v-model="name">
			<label for="surname">Your Surname</label>
			<input type="text" class="form-control" id="surname" v-model="surname">
			<label for="phone">Your phone</label>
			<input type="text" class="form-control" id="phone" v-model="phone">
			<br>
			<div class="guestsAdd">
				<span v-show="!noMoreGuests">Guests </span> 
				<input type="button" class="btn btn-primary" value=" +" v-on:click="addNew($event)" v-show="!noMoreGuests">
				<span class="alert alert-danger" v-show="noMoreGuests">No more Guests, please.</span>
			</div>
			<br>

			<div class="card" style="width: 18rem;"  v-for="(value,index) in guests" >
			  <div class="card-body">
			    <h5 class="card-title">Guest №{{ (index+1) }}</h5>
			    <h6 class="card-subtitle mb-2 text-muted">added person</h6>
			    <input required="true" type="text" :id="index+1" class="form-control" v-model="guests[index]" placeholder="Type name">
			    <span class="badge badge-pill badge-light" @click="deleteThis(index)">delete this</span>
			    <span class="badge badge-pill badge-danger" @click="deleteAll()">delete all</span>
			  </div>
			</div>
			<hr>
			<input type="button" class="btn btn-success" value="send Data" @click="allDone = !allDone" v-show="checkAll">
		</form>
		<table class="table table-striped table-bordered text-center" v-else>
			<thead class="thead-dark">
				<tr>
					<th colspan="2">About</th>
				</tr>
			</thead>
			<tr>
				<td> E mail</td>
				<td>{{ email }}</td>
			</tr>
			<tr>
				<td>Full Name</td>
				<td>{{ fullName }}</td>
			</tr>

			<tr>
				<td>Phone</td>
				<td>{{ phone }}</td>
			</tr>
			<thead v-show="sized > 0" class="thead-dark" >
				<tr>
					<th colspan="2">Guests with {{ name }}</th>
				</tr>
			</thead>
			<tr>
				<tr v-for="(item,index) in guests">
					<td>Guest №{{index +1}}</td>
					<td>{{ guests[index]}}</td>
				</tr>
			</tr>

		</table>
	</div>
	<script src="vue.js"></script>
	<script>
	let app = new Vue({
		el: '.el',
		data: {
			email:'',
			name:'',
			surname:'',
			phone:'',
			guests:[],
			allDone: false,
			size:0,
			noMoreGuests: false
		},
		methods:{
			addNew(e){
				this.guests.push('');
				console.log(this.guests);
				if(this.guests.length > 3){
					this.noMoreGuests = true;
				}
			},
			deleteThis(index){
				this.guests.splice(index,1);
			},
			deleteAll(){
				this.guests.splice(0);
			}
		},
		computed:{
			sized(){
				this.size = this.guests.length;
				return this.guests.length;
			},
			fullName(){
				let x = this.name + ' ' + this.surname;
				return x;
			},
			checkAll(){
				if(
					(this.email == '',
					this.name == '',
					this.surname == '',
					this.phone == ''
					) || (this.guests.length != 0 && this.guests[0] == '')){
					return false;
				} else {
					return true;
				}
			}
		}
	})
	console.log(app.guests);
	
	</script>
</body>
</html>